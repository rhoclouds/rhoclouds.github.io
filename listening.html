<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="/icons/blazePowder16x16.png" type="image/png">
    <link rel="icon" href="/icons/blazePowder32x32.png" type="image/png">
    <link rel="icon" href="/icons/blazePowder512x512.png" type="image/png">
    <link rel="icon" href="/icons/blazePowder192x192.png" type="image/png">
    <link rel="icon" href="/icons/blazePowderAppleTouchIcon.png" type="image/png">
    <link rel="icon" href="/icons/blazePowder.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>what i've been listening to lately - rhoclouds</title>
    <link rel="stylesheet" href="/css/main-style.css">
    <link rel="stylesheet" href="/css/blog-styles.css">
    <link rel="preconnect" href="https://open.spotify.com">
    <link rel="preconnect" href="https://i.scdn.co">
</head>

<body class="light-mode">
<div class="wrapper">
    <nav>
        <a href="https://rhoclouds.github.io/">home</a>
        <a href="/library.html">library</a>
        <a href="/blog.html">blog</a>
    </nav>
    <div class="content">
        <div class="container">
            <div class="post-date">june 15, 2025</div>
            <div class="post-content">
                <div class="post-subheader">be careful with volume!</div>
                
                <section class="listen-archive" aria-label="Listening history carousel">
  <header class="la-header">
    <div class="post-subheader">be careful with volume!</div>
    <div class="la-controls">
      <button class="la-btn" data-dir="-1" aria-label="Previous">‹</button>
      <button class="la-btn" data-dir="1"  aria-label="Next">›</button>
    </div>
  </header>

  <div class="la-track" id="la-track">
    <!-- SLIDE: Jun 15, 2025 -->
    <article class="la-slide" data-date="2025-06-15" aria-label="June 15, 2025">
      <h3 class="la-date">june 15, 2025</h3>
      <div class="la-cards">
        <!-- Use data-src placeholders; we’ll create/destroy iframes in JS -->
        <div class="embed" data-src="https://open.spotify.com/embed/track/0EYoG9Z0q0C0K1MCs1hQQl"></div>
        <div class="embed" data-src="https://open.spotify.com/embed/track/0LZy30mVmxqUpdQmaXKXBd"></div>
        <div class="embed" data-src="https://open.spotify.com/embed/track/21aVkXDch0A1nXo9he3j8L"></div>
        <div class="embed" data-src="https://open.spotify.com/embed/track/6qqrTXSdwiJaq8SO0X2lSe"></div>
        <div class="embed" data-src="https://open.spotify.com/embed/track/3WgSSo4SoHQjodjiRG71eX"></div>
      </div>
    </article>

    <!-- add new dates above -->
    <!--
    <article class="la-slide" data-date="2025-08-09" aria-label="August 9, 2025">
      <h3 class="la-date">august 9, 2025</h3>
      <div class="la-cards">
        <div class="embed" data-src="https://open.spotify.com/embed/track/XXXXXXXX"></div>
        ...
      </div>
    </article>
    -->
  </div>
</section>

<script>
(function(){
  const track = document.getElementById('la-track');
  if (!track) return;
  const slides = Array.from(track.querySelectorAll('.la-slide'));

  function mountEmbeds(slide){
    slide.querySelectorAll('.embed').forEach(holder => {
      if (holder.firstChild) return;
      const src = holder.getAttribute('data-src');
      if (!src) return;
      const f = document.createElement('iframe');
      f.setAttribute('allow','autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture');
      f.setAttribute('loading','lazy');
      f.src = src;
      holder.appendChild(f);
    });
  }

  function unmountEmbeds(slide){
    slide.querySelectorAll('.embed').forEach(holder => { holder.innerHTML = ''; });
  }

  function activate(index){
    slides.forEach((s, i) => i === index ? mountEmbeds(s) : unmountEmbeds(s));
  }

  // Find most-visible slide
  function currentSlideIndex(){
    const tr = track.getBoundingClientRect();
    let best = 0, bestOverlap = -1;
    slides.forEach((s, i) => {
      const r = s.getBoundingClientRect();
      const overlap = Math.min(tr.right, r.right) - Math.max(tr.left, r.left);
      if (overlap > bestOverlap) { bestOverlap = overlap; best = i; }
    });
    return best;
  }

  let timer;
  function onScrollEnd(){
    activate(currentSlideIndex());
  }

  // Debounce scroll to detect snap end
  track.addEventListener('scroll', () => {
    clearTimeout(timer);
    timer = setTimeout(onScrollEnd, 120);
  }, { passive: true });

  // buttons
  document.querySelectorAll('.la-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const dir = Number(btn.dataset.dir || 1);
      const width = track.getBoundingClientRect().width;
      track.scrollBy({ left: dir * width, behavior: 'smooth' });
    });
  });

  // first visible slide only
  window.addEventListener('load', () => {
    activate(currentSlideIndex());
  });
})();
</script>
</body>
</html>